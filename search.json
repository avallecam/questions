[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "The goal of the questions repository is to collect a set of Q&A of Outbreak data analysis tasks using R packages to train a large language model as a chatbox service."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Get started",
    "section": "",
    "text": "The goal of the questions repository is to collect a set of Q&A of Outbreak data analysis tasks using R packages to train a large language model as a chatbox service."
  },
  {
    "objectID": "index.html#qas",
    "href": "index.html#qas",
    "title": "Get started",
    "section": "Q&A’s",
    "text": "Q&A’s\n\n\n   \n     \n     \n       Order By\n       Default\n         \n          Title\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\nTitle\n\n\n\n\n\n\nHow to calculate the final size of an epidemic accounting for heterogeneous social contact?\n\n\n\n\nHow to calculate the weekly growth rate of an outbreak?\n\n\n\n\nHow to extract the serial interval distribution parameters of Ebola Virus Disease?\n\n\n\n\nHow to include heterogeneous susceptibility in a population to simulate the final size of an epidemic?\n\n\n\n\nHow to project the future trajectory of the outbreak?\n\n\n\n\nHow to quantify the time-varying reproduction number (Rt)?\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html#more",
    "href": "index.html#more",
    "title": "Get started",
    "section": "More",
    "text": "More\nRefer to the About page for more details about the rationale behind the design of this site."
  },
  {
    "objectID": "questions/question-01.html",
    "href": "questions/question-01.html",
    "title": "How to calculate the weekly growth rate of an outbreak?",
    "section": "",
    "text": "growth rate"
  },
  {
    "objectID": "questions/question-01.html#topic",
    "href": "questions/question-01.html#topic",
    "title": "How to calculate the weekly growth rate of an outbreak?",
    "section": "",
    "text": "growth rate"
  },
  {
    "objectID": "questions/question-01.html#introductory-prompt",
    "href": "questions/question-01.html#introductory-prompt",
    "title": "How to calculate the weekly growth rate of an outbreak?",
    "section": "Introductory prompt",
    "text": "Introductory prompt\nYou are R software teacher specialising in outbreak analytics and epidemic modelling. Give your answer entirely as R code, including some brief comments explaining key parts of the code. Do not include the original question in your response. Begin your response with a commented line introducing the code.\nUse tidyverse packages as much as you can to: select columns, filter rows, mutate new columns, pull columns out of a dataframe, create tibble objects, and pipe functions with the %&gt;% operator."
  },
  {
    "objectID": "questions/question-01.html#question",
    "href": "questions/question-01.html#question",
    "title": "How to calculate the weekly growth rate of an outbreak?",
    "section": "Question",
    "text": "Question\nHow to calculate the weekly growth rate of an outbreak?\nConditions:\n\nUse the first list element from the Simulated Ebola outbreak ebola_sim_clean object from the outbreaks R package. The name of the first element is linelist.\nUse the “date of onset” column to calculate the weekly growth rate.\nKeep the first 20 weeks of the period of the analysis."
  },
  {
    "objectID": "questions/question-01.html#answer",
    "href": "questions/question-01.html#answer",
    "title": "How to calculate the weekly growth rate of an outbreak?",
    "section": "Answer",
    "text": "Answer\n\n# Calculate the weekly growth rate of an outbreak\n\n# Load required packages\nlibrary(outbreaks)\nlibrary(i2extras)\nlibrary(dplyr)\n\n# Load the simulated Ebola outbreak data\ndata(ebola_sim_clean)\n\n# Extract the first element of the list\nlinelist &lt;- ebola_sim_clean[[1]]\n\n# Convert the data to an incidence2 object\nincidence2_data &lt;- incidence2::incidence(\n  x = linelist, \n  date_index = \"date_of_onset\",\n  interval = \"week\"\n)\n\n# Filter the dataset to keep the first 20 weeks. \nincidence2_filter &lt;- incidence2_data[1:20,]\n\n# Model the incidence\nincidence2_fit &lt;- fit_curve(incidence2_filter, model = \"poisson\", alpha = 0.05)\n\n# Print the result\ngrowth_rate(incidence2_fit)\n\n# Plot the result\nplot(incidence2_fit)\n\n\nThe outbreaks package is loaded to access the simulated Ebola outbreak data.\nThe ebola_sim_clean object from the package contains the simulated outbreak data.\nThe linelist object contains the first list element from ebola_sim_clean.\nThe incidence() function from the incidence2 package converts the data object linelist to an incidence2 class object.\nThe date_of_onset column is used in the date_index argument as the onset dates of the outbreak.\nThe \"week\" text string is used to count number of cases per week interval to calculate the weekly growth rate.\n\nThe incidence2 object provides observations arranged in descendant order with respect to the date_index.\nThe number of weeks to consider is set to 20 and stored in the dat_filter object.\nThe fit_curve() function from the i2extras package fits a Poisson linear regression model to the epicurve in the dat_filter object with an alpha value of 0.05 to calculate the 95% confidence intervals.\nThe growth_rate() function calculate the weekly growth/decay rate.\nThe plot() function plot the fitted epicurve.\n\nPlease note that the code assumes the necessary packages are already installed. If they are not, you can install them using first the install.packages(\"pak\") function and then the pak::pak() function for both packages in CRAN or GitHub before loading them with library().\nAdditionally, make sure to adjust the serial interval distribution parameters according to the specific outbreak you are analyzing."
  },
  {
    "objectID": "questions/question-01.html#reference",
    "href": "questions/question-01.html#reference",
    "title": "How to calculate the weekly growth rate of an outbreak?",
    "section": "Reference",
    "text": "Reference\n\nhttps://www.reconverse.org/i2extras/articles/fitting_epicurves.html"
  },
  {
    "objectID": "questions/question-02.html",
    "href": "questions/question-02.html",
    "title": "How to extract the serial interval distribution parameters of Ebola Virus Disease?",
    "section": "",
    "text": "epidemiological parameters"
  },
  {
    "objectID": "questions/question-02.html#topic",
    "href": "questions/question-02.html#topic",
    "title": "How to extract the serial interval distribution parameters of Ebola Virus Disease?",
    "section": "",
    "text": "epidemiological parameters"
  },
  {
    "objectID": "questions/question-02.html#introductory-prompt",
    "href": "questions/question-02.html#introductory-prompt",
    "title": "How to extract the serial interval distribution parameters of Ebola Virus Disease?",
    "section": "Introductory prompt",
    "text": "Introductory prompt\nYou are R software teacher specialising in outbreak analytics and epidemic modelling. Give your answer entirely as R code, including some brief comments explaining key parts of the code. Do not include the original question in your response. Begin your response with a commented line introducing the code.\nUse tidyverse packages as much as you can to: select columns, filter rows, mutate new columns, pull columns out of a dataframe, create tibble objects, and pipe functions with the %&gt;% operator."
  },
  {
    "objectID": "questions/question-02.html#question",
    "href": "questions/question-02.html#question",
    "title": "How to extract the serial interval distribution parameters of Ebola Virus Disease?",
    "section": "Question",
    "text": "Question\nHow to extract the serial interval distribution parameters of Ebola Virus Disease estimated from the WHO Ebola Response Team in 2015?"
  },
  {
    "objectID": "questions/question-02.html#answer",
    "href": "questions/question-02.html#answer",
    "title": "How to extract the serial interval distribution parameters of Ebola Virus Disease?",
    "section": "Answer",
    "text": "Answer\n\n# Extract the serial interval distribution parameters of Ebola Virus Disease estimated from the WHO Ebola Response Team in 2015\n\n# Load required packages\nlibrary(epiparameter)\n\n# Extract parameter by disease, distribution, author\nepidist_output &lt;- epidist_db(\n  disease = \"Ebola\",\n  epi_dist = \"serial_interval\",\n  author = \"WHO_Ebola_Response_Team\"\n)\n\n# Plot the epidist object\nplot(epidist_output, day_range = 0:50)\n\n\nThe epiparameter package is loaded to access the library of epidemiological parameters.\nThe epidist_db() function extract a parameter by specifying the disease name in the disease argument, epidemiological distribution in the epi_dist argument, and author name in the author argument.\nThe epidist_db() function creates an epidist object.\nThe plot function creates a plot from epidist objects.\nThe epiparam() functions provide access to a data frame with all the names of diseases, epidemiological distribution, and authors.\n\nPlease note that the code assumes the necessary packages are already installed. If they are not, you can install them using first the install.packages(\"pak\") function and then the pak::pak() function for both packages in CRAN or GitHub before loading them with library().\nAdditionally, make sure to adjust the serial interval distribution parameters according to the specific outbreak you are analyzing."
  },
  {
    "objectID": "questions/question-02.html#reference",
    "href": "questions/question-02.html#reference",
    "title": "How to extract the serial interval distribution parameters of Ebola Virus Disease?",
    "section": "Reference",
    "text": "Reference\n\nhttps://epiverse-trace.github.io/epiparameter/articles/epiparameter.html"
  },
  {
    "objectID": "questions/question-03.html",
    "href": "questions/question-03.html",
    "title": "How to quantify the time-varying reproduction number (Rt)?",
    "section": "",
    "text": "reproduction number"
  },
  {
    "objectID": "questions/question-03.html#topic",
    "href": "questions/question-03.html#topic",
    "title": "How to quantify the time-varying reproduction number (Rt)?",
    "section": "",
    "text": "reproduction number"
  },
  {
    "objectID": "questions/question-03.html#introductory-prompt",
    "href": "questions/question-03.html#introductory-prompt",
    "title": "How to quantify the time-varying reproduction number (Rt)?",
    "section": "Introductory prompt",
    "text": "Introductory prompt\nYou are R software teacher specialising in outbreak analytics and epidemic modelling. Give your answer entirely as R code, including some brief comments explaining key parts of the code. Do not include the original question in your response. Begin your response with a commented line introducing the code.\nUse tidyverse packages as much as you can to: select columns, filter rows, mutate new columns, pull columns out of a dataframe, create tibble objects, and pipe functions with the %&gt;% operator."
  },
  {
    "objectID": "questions/question-03.html#question",
    "href": "questions/question-03.html#question",
    "title": "How to quantify the time-varying reproduction number (Rt)?",
    "section": "Question",
    "text": "Question\nHow to quantify the time-varying reproduction number (Rt) of the outbreak?\nConditions:\n\nUse the first list element from the Simulated Ebola outbreak ebola_sim_clean object from the outbreaks R package. The name of the first element is linelist.\nUse the “date of onset” column to calculate the weekly growth rate.\nUse the serial interval distribution parameters of Ebola Virus Disease estimated from the WHO Ebola Response Team in 2015 to quantify the time-varying reproduction number.\nAssume a known mean and standard deviation values of the serial interval distribution to quantify the time-varying reproduction number."
  },
  {
    "objectID": "questions/question-03.html#answer",
    "href": "questions/question-03.html#answer",
    "title": "How to quantify the time-varying reproduction number (Rt)?",
    "section": "Answer",
    "text": "Answer\n\n# Quantify the time-varying reproduction number (Rt) of the outbreak\n\n# Load required packages\nlibrary(outbreaks)\nlibrary(incidence)\nlibrary(epiparameter)\nlibrary(EpiEstim)\nlibrary(tidyverse)\n\n# Load the simulated Ebola outbreak data\ndata(ebola_sim_clean)\n\n# Extract the first element of the list\nlinelist &lt;- ebola_sim_clean$linelist\n\n# Convert the data to an incidence object\nincidence_data &lt;- incidence::incidence(linelist$date_of_onset)\n\n# Extract parameter by disease, distribution, author\nepidist_ebola &lt;- epidist_db(\n  disease = \"Ebola\",\n  epi_dist = \"serial_interval\",\n  author = \"WHO_Ebola_Response_Team\"\n)\n\n# Estimate the time-varying reproduction number\nepiestim_output &lt;- estimate_R(\n  incid = incidence_data, \n  method = \"parametric_si\",\n  config = make_config(\n    mean_si = epidist_ebola$summary_stats$centre_spread$mean,\n    std_si = epidist_ebola$summary_stats$centre_spread$sd\n  )\n)\n\n# Plot the time-varying reproduction number\nplot(epiestim_output)\n\n\nThe outbreaks package is loaded to access the simulated Ebola outbreak data.\nThe epiparameter package is loaded to access the library of epidemiological parameters.\nThe ebola_sim_clean object from the package contains the simulated outbreak data.\nThe linelist object contains the first list element from ebola_sim_clean.\nThe incidence() function from the incidence package converts the vector date_of_onset from the linelist data frame to an incidence class object.\nThe epidist_db() function from the epiparameter package extract a parameter by specifying the disease name in the disease argument, epidemiological distribution in the epi_dist argument, and author name in the author argument.\nThe estimate_R() function from the EpiEstim package estimates the time-varying reproduction number (Rt). We provide the incidence_data, specify the method as \"parametric_si\" (parametric with a known serial interval), and pass the serial interval distribution parameters using the make_config function.\nThe plot function creates three plots from the estimate_R class object.\n\nPlease note that the code assumes the necessary packages are already installed. If they are not, you can install them using first the install.packages(\"pak\") function and then the pak::pak() function for both packages in CRAN or GitHub before loading them with library().\nAdditionally, make sure to adjust the serial interval distribution parameters according to the specific outbreak you are analyzing."
  },
  {
    "objectID": "questions/question-03.html#reference",
    "href": "questions/question-03.html#reference",
    "title": "How to quantify the time-varying reproduction number (Rt)?",
    "section": "Reference",
    "text": "Reference\n\nhttps://epiverse-trace.github.io/epiparameter/articles/epiparameter.html\nhttps://mrc-ide.github.io/EpiEstim/articles/full_EpiEstim_vignette.html"
  },
  {
    "objectID": "questions/question-04.html",
    "href": "questions/question-04.html",
    "title": "How to project the future trajectory of the outbreak?",
    "section": "",
    "text": "projection"
  },
  {
    "objectID": "questions/question-04.html#topic",
    "href": "questions/question-04.html#topic",
    "title": "How to project the future trajectory of the outbreak?",
    "section": "",
    "text": "projection"
  },
  {
    "objectID": "questions/question-04.html#introductory-prompt",
    "href": "questions/question-04.html#introductory-prompt",
    "title": "How to project the future trajectory of the outbreak?",
    "section": "Introductory prompt",
    "text": "Introductory prompt\nYou are R software teacher specialising in outbreak analytics and epidemic modelling. Give your answer entirely as R code, including some brief comments explaining key parts of the code. Do not include the original question in your response. Begin your response with a commented line introducing the code.\nNOT USED: Use tidyverse packages as much as you can to: select columns, filter rows, mutate new columns, pull columns out of a dataframe, create tibble objects, and pipe functions with the %&gt;% operator."
  },
  {
    "objectID": "questions/question-04.html#question",
    "href": "questions/question-04.html#question",
    "title": "How to project the future trajectory of the outbreak?",
    "section": "Question",
    "text": "Question\nHow to project the future trajectory of the outbreak?\nConditions:\n\n(pending)"
  },
  {
    "objectID": "questions/question-04.html#answer",
    "href": "questions/question-04.html#answer",
    "title": "How to project the future trajectory of the outbreak?",
    "section": "Answer",
    "text": "Answer\n\n# Forecast the future trajectory of the outbreak\n\n# Load required packages\nlibrary(outbreaks)\nlibrary(incidence)\nlibrary(i2extras)\nlibrary(epiparameter)\nlibrary(epitrix)\nlibrary(projections)\nlibrary(tidyverse)\n\n# Load the simulated Ebola outbreak data\ndata(ebola_sim_clean)\n\n# Extract the first element of the list\nlinelist &lt;- ebola_sim_clean$linelist\n\n# Convert the data to an incidence2 object\nincidence2_data &lt;- incidence2::incidence(\n  x = linelist, \n  date_index = \"date_of_onset\",\n  interval = \"day\"\n)\n\n# Filter the incidence2 object to keep the first 48 weeks. \nincidence2_filter &lt;- incidence2_data[1:48,]\n\n# Convert the filtered incidence2 object to an incidence object\nincidence1_filter &lt;- incidence2_filter %&gt;% \n  uncount(count) %&gt;% \n  pull(date_index) %&gt;% \n  incidence::incidence()\n\n# Model the incidence\nincidence2_fit &lt;- fit_curve(\n  x = incidence2_filter,\n  model = \"poisson\",\n  alpha = 0.05\n)\n\n# Extract parameter by disease, distribution, author\nepidist_ebola_si &lt;- epidist_db(\n  disease = \"Ebola\",\n  epi_dist = \"serial_interval\",\n  author = \"WHO_Ebola_Response_Team\"\n)\n\n# Discretise the continuous distribution\ndiscrete_ebola_si &lt;- discretise(epidist_ebola_si)\n\n# Convert from epidist to distcrete class object\ndistcrete_ebola_si &lt;- \n  distcrete::distcrete(\n    name = \"gamma\",\n    shape = discrete_ebola_si$prob_dist$parameters$shape,\n    scale = discrete_ebola_si$prob_dist$parameters$scale,\n    interval = discrete_ebola_si$prob_dist$interval,\n    w = discrete_ebola_si$prob_dist$w\n  )\n\n# Transform the growth rate into a reproductive number\nreproductive_basic &lt;- \n  epitrix::lm2R0_sample(\n    x = incidence2_fit %&gt;% pull(model) %&gt;% pluck(1),\n    w = discrete_ebola_si$prob_dist,\n    n = 500\n  )\n\n# Project the future incidence\nincidence1_projection &lt;- \n  projections::project(\n    x = incidence1_filter, \n    R = reproductive_basic,\n    si = distcrete_ebola_si, \n    n_sim = 1000, \n    n_days = 14, \n    R_fix_within = TRUE\n  )\n\n# Plot projections object\nplot(incidence1_filter) %&gt;% \n  add_projections(\n    x = incidence1_projection,\n    quantiles = c(0.025, 0.5, 0.975)\n  )\n\n\n(pending)\nProject over two weeks\n\nPlease note that the code assumes the necessary packages are already installed. If they are not, you can install them using first the install.packages(\"pak\") function and then the pak::pak() function for both packages in CRAN or GitHub before loading them with library().\nAdditionally, make sure to adjust the serial interval distribution parameters according to the specific outbreak you are analyzing."
  },
  {
    "objectID": "questions/question-04.html#reference",
    "href": "questions/question-04.html#reference",
    "title": "How to project the future trajectory of the outbreak?",
    "section": "Reference",
    "text": "Reference\n\nhttps://epiverse-trace.github.io/epiparameter/articles/extract_convert.html\nhttp://www.repidemicsconsortium.org/epitrix/reference/r2R0.html\nhttp://www.repidemicsconsortium.org/epitrix/reference/gamma_tools.html\nhttps://www.reconlearn.org/solutions/real-time-response-2.html"
  },
  {
    "objectID": "questions/question-05.html",
    "href": "questions/question-05.html",
    "title": "How to include heterogeneous susceptibility in a population to simulate the final size of an epidemic?",
    "section": "",
    "text": "susceptibility matrices"
  },
  {
    "objectID": "questions/question-05.html#topic",
    "href": "questions/question-05.html#topic",
    "title": "How to include heterogeneous susceptibility in a population to simulate the final size of an epidemic?",
    "section": "",
    "text": "susceptibility matrices"
  },
  {
    "objectID": "questions/question-05.html#introductory-prompt",
    "href": "questions/question-05.html#introductory-prompt",
    "title": "How to include heterogeneous susceptibility in a population to simulate the final size of an epidemic?",
    "section": "Introductory prompt",
    "text": "Introductory prompt\nYou are R software teacher specialising in outbreak analytics and epidemic modelling. Give your answer entirely as R code, including some brief comments explaining key parts of the code. Do not include the original question in your response. Begin your response with a commented line introducing the code.\nUse tidyverse packages as much as you can to: select columns, filter rows, mutate new columns, pull columns out of a dataframe, create tibble objects, and pipe functions with the %&gt;% operator."
  },
  {
    "objectID": "questions/question-05.html#question",
    "href": "questions/question-05.html#question",
    "title": "How to include heterogeneous susceptibility in a population to simulate the final size of an epidemic?",
    "section": "Question",
    "text": "Question\nHow to include heterogeneous susceptibility in a population to simulate the final size of an epidemic?\nConditions:\n\nCreate the two susceptibility matrices needed for the finalsize package.\nThe population is divided into five age groups: 0 – 4, 5 – 17, 18 – 39, 40 – 64, and 65 and over.\nAn immunization campaign generated within age group variation in susceptibility.\nThe immunization effect for all age groups is 25%.\nThe infection susceptibility between age group differs in the following way:\n\n20% in age group 0 – 4,\n50% in age group 5 – 17,\n60% in age group 18 – 39,\n90% in age group 40 – 64,\n100% in age group of 65 and over,\n\n\nThe percentage of the unimmunized population in all age groups is 60%."
  },
  {
    "objectID": "questions/question-05.html#answer",
    "href": "questions/question-05.html#answer",
    "title": "How to include heterogeneous susceptibility in a population to simulate the final size of an epidemic?",
    "section": "Answer",
    "text": "Answer\n\n# Create the susceptibility matrices for variability between and within groups\n\n# Load required packages\nlibrary(tidyverse)\n\n# Define the immunization effect\nimmunization_effect &lt;- 0.25\n\n# Create the susceptibility matrix\nsusceptibility &lt;- \n  tribble(\n    ~age_group, ~unimmunised,\n       \"[0,5)\",          0.2,\n      \"[5,18)\",          0.5,\n     \"[18,40)\",          0.6,\n     \"[40,65)\",          0.9,\n         \"65+\",            1\n  ) %&gt;%\n  mutate(immunised = unimmunised * (1 - immunization_effect)) %&gt;%\n  column_to_rownames(var = \"age_group\") %&gt;%\n  as.matrix()\n\nsusceptibility\n\n# Create the demography-in-susceptibility matrix\np_susceptibility &lt;- \n  tribble(\n    ~age_group, ~unimmunised,\n       \"[0,5)\",          0.6,\n      \"[5,18)\",          0.6,\n     \"[18,40)\",          0.6,\n     \"[40,65)\",          0.6,\n         \"65+\",          0.6\n  ) %&gt;%\n  mutate(immunised = 1 - unimmunised) %&gt;%\n  column_to_rownames(var = \"age_group\") %&gt;%\n  as.matrix()\n\np_susceptibility\n\n\nThe tidyverse package is loaded to create matrices from data frame operations.\nThe immunization_effect contains the 0.25 effect from the immunization campaign.\nThe susceptibility object is a matrix that contains the susceptibility or probability of infection. Each row-column element in the matrix represents the susceptibility of individuals in demographic groups (rows) and susceptibility groups (columns).\nThe tribble() function creates a tibble with a row-by-row layout. The “age_group” column contains all age groups, and the “unimmunized” column has its corresponding susceptibility values.\nThe mutate() function creates the “immunized” column by multiplying the susceptibility values from the “unimmunized” column times the new susceptibility after the immunization_effect.\nThe column_to_rownames() function creates data frame row names from the explicit column “age_group”.\nThe as.matrix() function turns the data frame into a matrix.\nThe p_susceptibility object is a matrix that contains the proportion or probability that individuals in a demographic group are also in a specific susceptibility group. Each row-column element in the matrix represents the proportion of each demographic group (rows) that falls into the susceptibility group (columns). Consequently, each of its rows must always sum to 1.0.\nThe tribble() function creates a tibble with a row-by-row layout. The “age_group” column contains all age groups, and the “unimmunized” column proportion of the unimmunized population in all age groups equals 0.6.\nThe mutate() function creates the “immunized” column by getting the complement proportion of the unimmunized”.\n\nPlease note that the code assumes the necessary packages are already installed. If they are not, you can install them using first the install.packages(\"pak\") function and then the pak::pak() function for both packages in CRAN or GitHub before loading them with library().\nAdditionally, make sure to adjust the serial interval distribution parameters according to the specific outbreak you are analyzing."
  },
  {
    "objectID": "questions/question-05.html#reference",
    "href": "questions/question-05.html#reference",
    "title": "How to include heterogeneous susceptibility in a population to simulate the final size of an epidemic?",
    "section": "Reference",
    "text": "Reference\n\nhttps://epiverse-trace.github.io/finalsize/articles/susceptibility_matrices.html"
  },
  {
    "objectID": "questions/question-06.html",
    "href": "questions/question-06.html",
    "title": "How to calculate the final size of an epidemic accounting for heterogeneous social contact?",
    "section": "",
    "text": "final size of an epidemic"
  },
  {
    "objectID": "questions/question-06.html#topic",
    "href": "questions/question-06.html#topic",
    "title": "How to calculate the final size of an epidemic accounting for heterogeneous social contact?",
    "section": "",
    "text": "final size of an epidemic"
  },
  {
    "objectID": "questions/question-06.html#introductory-prompt",
    "href": "questions/question-06.html#introductory-prompt",
    "title": "How to calculate the final size of an epidemic accounting for heterogeneous social contact?",
    "section": "Introductory prompt",
    "text": "Introductory prompt\nYou are R software teacher specialising in outbreak analytics and epidemic modelling. Give your answer entirely as R code, including some brief comments explaining key parts of the code. Do not include the original question in your response. Begin your response with a commented line introducing the code.\nNOT USED: Use tidyverse packages as much as you can to: select columns, filter rows, mutate new columns, pull columns out of a dataframe, create tibble objects, and pipe functions with the %&gt;% operator."
  },
  {
    "objectID": "questions/question-06.html#question",
    "href": "questions/question-06.html#question",
    "title": "How to calculate the final size of an epidemic accounting for heterogeneous social contact?",
    "section": "Question",
    "text": "Question\nHow to calculate the final size of an epidemic accounting for heterogeneous social contact and homogeneous susceptibility in all age groups?\nConditions:\n\n(pending)\n\nAnswer\n\n# Calculate the final size of an epidemic\n\nlibrary(finalsize)\nlibrary(socialmixr)\nlibrary(tidyverse)\n\n# get UK polymod data\npolymod &lt;- socialmixr::polymod\ncontact_data &lt;- socialmixr::contact_matrix(\n  polymod,\n  countries = \"United Kingdom\",\n  age.limits = c(0, 5, 18, 40, 65),\n  symmetric = TRUE\n)\n\n# get the contact matrix and demography data\ncontact_matrix &lt;- t(contact_data$matrix)\n\n# scale the contact matrix so the largest eigenvalue is 1.0\n# this is to ensure that the overall epidemic dynamics correctly reflect\n# the assumed value of R0\ncontact_matrix_scaled &lt;- contact_matrix / max(Re(eigen(contact_matrix)$values))\n\n# Define population in each age group\ndemography_vector &lt;- contact_data$demography$population\ndemography_groups &lt;- contact_data$demography$age.group\n\n# divide each row of the contact matrix by the corresponding demography\n# this reflects the assumption that each individual in group {j} make contacts\n# at random with individuals in group {i}\ncontact_matrix_random &lt;- contact_matrix_scaled / demography_vector\n\n# Define susceptibility of each group\n# susceptibility matrix\nsusceptibility &lt;- tibble(\n  age_group = demography_groups,\n  susceptible = c(0.8, 0.8, 0.8, 0.8, 0.8)\n) %&gt;%\n  column_to_rownames(var = \"age_group\") %&gt;%\n  as.matrix()\n\nsusceptibility\n\n# Assume uniform susceptibility within age groups\n# demography-in-susceptibility matrix\np_susceptibility &lt;- tibble(\n  age_group = demography_groups,\n  susceptible = c(1.0, 1.0, 1.0, 1.0, 1.0)\n) %&gt;%\n  column_to_rownames(var = \"age_group\") %&gt;%\n  as.matrix()\n\np_susceptibility\n\n# R0 of the disease\nr0 &lt;- 1.5 # assumed for pandemic influenza\n\n# Calculate the proportion of individuals infected in each age group\nfinal_size(\n  r0 = r0,\n  contact_matrix = contact_matrix_random,\n  demography_vector = demography_vector,\n  susceptibility = susceptibility,\n  p_susceptibility = p_susceptibility\n)\n\n\n(pending)\n\nPlease note that the code assumes the necessary packages are already installed. If they are not, you can install them using first the install.packages(\"pak\") function and then the pak::pak() function for both packages in CRAN or GitHub before loading them with library().\nAdditionally, make sure to adjust the serial interval distribution parameters according to the specific outbreak you are analyzing.\nReference\n\nhttps://epiverse-trace.github.io/finalsize/articles/susceptibility_matrices.html\nhttps://epiverse-trace.github.io/finalsize/articles/varying_contacts.html"
  }
]